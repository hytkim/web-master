<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 상세 - yedam store</title>
    <link href="project.css" rel="stylesheet">
    <link href="item.css" rel="stylesheet">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>
<body>
    <div id="container">
        <header>
          <div class="logo-container">
            <a href="index.html" id="logo-link"> <img src="logo.png" alt="Yedam Store 로고"> </a>
          </div>
          <nav>
            <ul class="menu-left">
              <li><a href="index.html#best" id="best-tab">베스트</a></li>
              <li><a href="index.html#search" id="search-tab">상품 조회</a></li>
              <li id="add-product-menu" class="admin-only" style="display: none;"><a href="#">상품 추가</a></li>
              <li><a href="board.html#reviews">리뷰 게시판</a></li>
              <li id="transaction-history-menu" style="display: none;"><a href="board.html#history">거래내역 조회</a></li>
            </ul>
            <div class="menu-right" id="auth-menu">
              <a href="#" id="open-login">로그인</a>
              <span class="divider">/</span>
              <a href="#" id="open-signup">회원가입</a>
            </div>
            <div class="user-wrapper" id="user-menu">
              <div class="user-info">
                <span class="user-name" id="user-name"></span>
                <span class="user-id" id="user-id"></span>
                <span class="user-point" id="user-point"></span>
              </div>
              <button class="logout-btn" id="logout-btn">로그아웃</button>
            </div>
          </nav>
        </header>

        <main class="item-main">
            <div class="item-container">
                <!-- 왼쪽: 상품 이미지 영역 -->
                <div class="item-image-section">
                    <img src="logo.png" alt="메인 상품 이미지" class="main-image" id="item-image">
                </div>

                <!-- 오른쪽: 상품 정보 및 구매 영역 -->
                <div class="item-info-section">
                    <h1 class="item-title" id="item-title">상품 정보를 불러오는 중...</h1>
                    <p class="item-origin" id="item-origin"></p>
                    
                    <div class="item-description">
                        <p id="item-description-content"></p>
                    </div>

                    <!-- 가격 표시 영역 -->
                    <div class="price-display" id="item-price-display">
                        <!-- 가격 정보가 여기에 동적으로 렌더링됩니다. -->
                    </div>

                    <div class="quantity-control">
                        <button class="quantity-btn" id="quantity-minus">-</button>
                        <input type="text" value="1" class="quantity-input" id="quantity-input" readonly>
                        <button class="quantity-btn" id="quantity-plus">+</button>
                    </div>

                    <div class="total-price-section">
                        <span>총 상품 금액</span>
                        <span class="total-price" id="total-price">0원</span>
                    </div>

                    <button class="buy-now-btn">구매하기</button>
                </div>
            </div>

            <div class="reviews-section">
                <h2>상품 리뷰</h2>
                <div id="reviews-container">
                    <!-- 리뷰가 여기에 동적으로 로드됩니다. -->
                </div>
            </div>
        </main>
    </div>

    <div class="popup-wrapper">
      <div class="popup" id="main-popup">
        <span class="close-btn">&times;</span>
        <img src="logo.png" style="display: block; margin: 0 auto 20px; height: 100px;">
        
        <nav>
          <button data-target="login" class="active">로그인</button>
          <button data-target="find-id">아이디 찾기</button>
          <button data-target="find-pw">비밀번호 찾기</button>
          <button data-target="signup">회원가입</button>
        </nav>

        <section id="login" class="active">
          <h2>로그인</h2>
          <form name="loginForm">
            <label>아이디:<input type="text" name="username" id="username" required /></label>
            <label>비밀번호:<input type="password" name="password" id="password" required /></label>
            <button type="submit" class="submit">로그인</button>
          </form>
        </section>

        <section id="find-id">
          <h2>아이디 찾기</h2>
          <form name="findIdForm">
            <label>이름:<input id="id_search_name" type="text" name="userName" required /></label>
            <label>주소:</label>
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
              <input type="text" name="postcode" id="id_serch_postcode" placeholder="우편번호" readonly style="flex-grow: 1;">
              <button type="button" onclick="execDaumPostcode_id()" style="flex-shrink: 0; margin-left: 5px; padding: 0.8rem;">주소 검색</button>
            </div>
            <input type="text" name="address" id="id_searchaddress" placeholder="주소" readonly style="margin-bottom: 0.5rem;">
            <input type="text" name="detailAddress" id="id_searchdetailAddress" placeholder="상세주소까지 정확하게 입력" required>
            <input type="hidden" name="extraAddress" id="id_searchextraAddress">
            <button type="submit" class="submit">아이디 찾기</button>
          </form>
          <div class="message" id="find-id-msg"></div>
        </section>

        <section id="find-pw">
          <h2>비밀번호 찾기</h2>
          <form name="findPwForm">
            <label>아이디:<input id="pw_search_id" type="text" name="userId" required /></label>
            <label>주소:</label>
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
              <input type="text" name="postcode" id="pw_search_postcode" placeholder="우편번호" readonly style="flex-grow: 1;">
              <button type="button" onclick="execDaumPostcode_pw()" style="flex-shrink: 0; margin-left: 5px; padding: 0.8rem;">주소 검색</button>
            </div>
            <input type="text" name="address" id="pw_searchaddress" placeholder="주소" readonly style="margin-bottom: 0.5rem;">
            <input type="text" name="detailAddress" id="pw_searchdetailAddress" placeholder="상세주소까지 정확하게 입력">
            <input type="hidden" name="extraAddress" id="pw_searchextraAddress">
            <button type="submit" class="submit">비밀번호 찾기</button>
          </form>
          <div class="message" id="find-pw-msg"></div>
        </section>
        
        <section id="signup">
          <h2>회원가입</h2>
          <form action="/signup" method="post" name="signupForm">
            <label>아이디:<input id="signup_id" type="text" name="userId" required /></label>
            <label>비밀번호:<input id="signup_pw" type="password" name="userPw" required /></label>
            <label>비밀번호 확인:<input id="signup_pw2" type="password" name="userPw2" required /></label>
            <label>이름:<input id="signup_name" type="text" name="userName" required /></label>
            
            <label>주소:</label>
            <div style="display: flex; align-items: center; margin-bottom: 0.5rem;">
              <input type="text" name="postcode" id="signup_postcode" placeholder="우편번호" readonly style="flex-grow: 1;">
              <button type="button" onclick="execDaumPostcode()" style="flex-shrink: 0; margin-left: 5px; padding: 0.8rem;">주소 검색</button>
            </div>
            <input type="text" name="address" id="signup_address" placeholder="주소" readonly style="margin-bottom: 0.5rem;">
            <input type="text" name="detailAddress" id="signup_detailAddress" placeholder="상세주소">
            <input type="hidden" name="extraAddress" id="signup_extraAddress">
            <label style="margin-top: 1rem;">생년월일:<input id="signup_userBirth" type="date" name="userBirth" required /></label>
            <button type="submit" class="submit">가입하기</button>
          </form>
              </section>
        
              <section id="add-product">
                <h2>새 상품 추가</h2>
                <form name="addProductForm">
                  <label>상품명:<input type="text" name="items_name" required /></label>
                  <label>가격:<input type="number" name="items_price" required /></label>
                  <label>카테고리:<input type="text" name="items_category" placeholder="예: 과일, 채소" required /></label>
                  <label>이미지 URL:<input type="text" name="items_image" placeholder="https://example.com/image.png" /></label>
                  <label>상세정보:<textarea name="items_info" rows="4"></textarea></label>
                  <button type="submit" class="submit">상품 등록</button>
                </form>
              </section>
        
              <section id="session-timeout">          <h2>세션 만료</h2>
          <p>장시간 활동이 없어 안전을 위해 자동으로 로그아웃되었습니다.</p>
          <p>다시 로그인해주세요.</p>
          <button type="button" class="submit" id="session-ok-btn">확인</button>
        </section>

      </div>
    </div>

    <script src="item.js" defer></script>
    <script src="project.js" defer></script>

    <!-- Purchase Confirmation Popup -->
    <div class="popup-wrapper" id="purchase-popup-wrapper">
        <div class="popup" id="purchase-popup">
            <span class="close-btn" id="purchase-close-btn">&times;</span>
            <h2>구매 확인</h2>
            <div class="purchase-summary">
                <img src="" alt="상품 이미지" id="purchase-item-image">
                <div class="purchase-info">
                    <p id="purchase-item-name"></p>
                    <p>수량: <span id="purchase-quantity"></span>개</p>
                </div>
            </div>
            <div class="purchase-details">
                <div class="detail-row">
                    <span>총 상품 금액</span>
                    <span id="purchase-total-price"></span>
                </div>
                <div class="detail-row">
                    <span>보유 포인트</span>
                    <span id="purchase-user-points"></span>
                </div>
                <div class="detail-row points-used-row">
                    <span>사용 포인트</span>
                    <span id="purchase-points-used"></span>
                </div>
                <div class="detail-row address-row">
                    <label for="purchase-address">배송지</label>
                    <div class="address-inputs">
                        <div class="postcode-wrapper">
                            <input type="text" id="purchase-postcode" placeholder="우편번호" readonly>
                            <button type="button" id="purchase-postcode-btn">주소 검색</button>
                        </div>
                        <input type="text" id="purchase-address" placeholder="주소" readonly>
                        <input type="text" id="purchase-detailAddress" placeholder="상세주소">
                    </div>
                </div>
                <div class="detail-row final-payment">
                    <span>최종 결제 금액</span>
                    <span id="purchase-final-price"></span>
                </div>
            </div>
            <div class="purchase-actions">
                <button class="cancel-btn" id="purchase-cancel-btn">취소</button>
                <button class="confirm-btn" id="purchase-confirm-btn">결제하기</button>
            </div>
        </div>
    </div>
</body>
</html>